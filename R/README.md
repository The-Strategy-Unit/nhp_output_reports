# `R/`

The main `populate-template.R` script in the root sources its functions from this directory.
That includes:

* `azure.R`, which contains functions to fetch data from Azure and perform some wrangling
* `generate-check-values.R`, which performs some calculations to help with the post-generation checking process
* `generate-figures.R`, which creates charts and tables and writes them
* `generate-values.R`, which generates all the calculated values to be inserted into the body of the template document
* `insert-into-template.R`, which has functions to generate and insert all the elements into the template and save it
* the `nhp_outputs/` directory, which contains functions copied/adapted from the [nhp_outputs repo](https://github.com/The-Strategy-Unit/nhp_outputs) that mostly handle data preparation and chart generation

Note that there has been some editing of scripts copied from nhp_outputs.
The code of the NHP Outputs app only ever has to handle results files generated by the latest model version (each app release is a separate deployment locked to a particular released model version).
This repo needs, however, to handle results files from all versions of the model (starting with v1.0).
As such, we have to consider additional patching when parsing results files, particularly in `fct_get_data.R`.
